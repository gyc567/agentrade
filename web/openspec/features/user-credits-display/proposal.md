# OpenSpecææ¡ˆï¼šç”¨æˆ·å‰©ä½™ç§¯åˆ†æ˜¾ç¤ºåŠŸèƒ½

**ææ¡ˆID**: USER-CREDITS-DISPLAY
**ç‰ˆæœ¬**: 1.0
**ä¼˜å…ˆçº§**: ğŸŸ¡ P2 - Feature
**çŠ¶æ€**: å¾…æ‰¹å‡†

---

## 1. åŠŸèƒ½éœ€æ±‚

### 1.1 ç”¨æˆ·åœºæ™¯
ç™»å½•åçš„ç”¨æˆ·éœ€è¦å®æ—¶äº†è§£è‡ªå·±çš„ç§¯åˆ†ä½™é¢ï¼Œç”¨äºï¼š
- å¿«é€ŸæŸ¥çœ‹å¯ç”¨ç§¯åˆ†
- è®¡åˆ’ç§¯åˆ†æ¶ˆè´¹
- æç¤ºç§¯åˆ†å³å°†ç”¨å°½

### 1.2 ä½ç½®æè¿°
```
Headerå¸ƒå±€ï¼š
[Logo] [Hamburger] ... [ç”¨æˆ·å] [ç§¯åˆ†] [è¯­è¨€åˆ‡æ¢] [ç”¨æˆ·èœå•]
                              â†‘
                          æ–°å¢ä½ç½®
```

### 1.3 æ˜¾ç¤ºå†…å®¹
- ç§¯åˆ†å›¾æ ‡ï¼ˆâ­ æˆ– ğŸ’ï¼‰
- æ•°å­—ç§¯åˆ†å€¼
- å¯é€‰ï¼šç§¯åˆ†è¿›åº¦æˆ–çŠ¶æ€

---

## 2. æŠ€æœ¯è®¾è®¡

### 2.1 æ ¸å¿ƒåŸåˆ™
- **KISSåŸåˆ™**: æœ€å°åŒ–ç»„ä»¶ï¼Œé¿å…å¤æ‚é€»è¾‘
- **é«˜å†…èš**: ç§¯åˆ†ç›¸å…³é€»è¾‘é›†ä¸­åœ¨ä¸€ä¸ªæ¨¡å—
- **ä½è€¦åˆ**: ä¸ä¾èµ–å…¶ä»–ä¸šåŠ¡é€»è¾‘
- **å¯æµ‹è¯•**: 100%ä»£ç è¦†ç›–ç‡

### 2.2 æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Header Component             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Logo â”‚ Nav â”‚ [UserCredits] â”‚ ... â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
    CreditsDisplay
    â”œâ”€ useUserCredits hook (æ•°æ®è·å–)
    â”œâ”€ CreditsIcon component (å›¾æ ‡)
    â””â”€ CreditsValue component (æ•°å€¼)
         â†“
    API: GET /api/user/credits
```

### 2.3 æ–‡ä»¶ç»“æ„

```
src/
â”œâ”€â”€ hooks/
â”‚   â””â”€â”€ useUserCredits.ts          # ç§¯åˆ†æ•°æ®hook
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ CreditsDisplay.tsx         # ä¸»ç»„ä»¶
â”‚   â”œâ”€â”€ CreditsIcon.tsx            # å›¾æ ‡å­ç»„ä»¶
â”‚   â””â”€â”€ CreditsValue.tsx           # æ•°å€¼å­ç»„ä»¶
â”œâ”€â”€ __tests__/
â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â””â”€â”€ useUserCredits.test.ts
â”‚   â””â”€â”€ components/
â”‚       â”œâ”€â”€ CreditsDisplay.test.tsx
â”‚       â”œâ”€â”€ CreditsIcon.test.tsx
â”‚       â””â”€â”€ CreditsValue.test.tsx
â””â”€â”€ types.ts                        # ç±»å‹å®šä¹‰
```

---

## 3. å®ç°ç»†èŠ‚

### 3.1 æ•°æ®ç»“æ„

```typescript
// ç§¯åˆ†æ•°æ®æ¥å£
interface UserCredits {
  total: number;           // æ€»ç§¯åˆ†
  available: number;       // å¯ç”¨ç§¯åˆ†
  used: number;           // å·²ç”¨ç§¯åˆ†
  lastUpdated: string;    // æ›´æ–°æ—¶é—´
}

// Hookè¿”å›ç±»å‹
interface UseUserCreditsReturn {
  credits: UserCredits | null;
  loading: boolean;
  error: Error | null;
  refetch: () => Promise<void>;
}
```

### 3.2 åç«¯API

```
GET /api/user/credits
Response: {
  "total": 1000,
  "available": 750,
  "used": 250,
  "lastUpdated": "2025-12-27T10:00:00Z"
}
```

### 3.3 useUserCredits Hook

å…³é”®ç‰¹æ€§ï¼š
- è‡ªåŠ¨è·å–ç”¨æˆ·ç§¯åˆ†
- æ”¯æŒè‡ªåŠ¨åˆ·æ–°ï¼ˆ30ç§’é—´éš”ï¼‰
- é”™è¯¯å¤„ç†å’Œç¼“å­˜
- è½»é‡çº§ï¼Œæ— ç¬¬ä¸‰æ–¹ä¾èµ–

```typescript
function useUserCredits() {
  // 1. ä»contextè·å–user
  // 2. å¦‚æœuserå­˜åœ¨ï¼Œè°ƒç”¨API
  // 3. è®¾ç½®è‡ªåŠ¨åˆ·æ–°å®šæ—¶å™¨
  // 4. è¿”å›æ•°æ®å’Œæ–¹æ³•
}
```

### 3.4 ç»„ä»¶æ ‘

```
CreditsDisplay
â”œâ”€ loadingçŠ¶æ€: æ˜¾ç¤ºéª¨æ¶å±
â”œâ”€ errorçŠ¶æ€: æ˜¾ç¤º"-"
â””â”€ successçŠ¶æ€:
   â”œâ”€ CreditsIcon (çº¯å±•ç¤ºï¼Œæ— é€»è¾‘)
   â””â”€ CreditsValue (çº¯å±•ç¤ºï¼Œæ— é€»è¾‘)
```

---

## 4. æ ·å¼è®¾è®¡

### 4.1 è§†è§‰è§„èŒƒ

```css
/* æç®€é£æ ¼ï¼ŒåŒ¹é…ç°æœ‰è®¾è®¡ */
.credits-display {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 4px 8px;
  border-radius: 6px;
  background: rgba(240, 185, 11, 0.1);  /* é‡‘è‰²èƒŒæ™¯ */
  color: #F0B90B;                       /* é‡‘è‰²æ–‡å­— */
  font-size: 14px;
  font-weight: 600;
}

.credits-icon {
  font-size: 16px;  /* â­ */
}

.credits-value {
  min-width: 40px;  /* ä¿æŒå®½åº¦ç¨³å®š */
}
```

### 4.2 å“åº”å¼è®¾è®¡

- æ¡Œé¢: æ˜¾ç¤ºå®Œæ•´æ ·å¼
- å¹³æ¿: æ˜¾ç¤ºå®Œæ•´æ ·å¼
- æ‰‹æœº: æ˜¾ç¤ºå›¾æ ‡ + æ•°å€¼ï¼ˆç®€åŒ–ï¼‰

---

## 5. æµ‹è¯•ç­–ç•¥

### 5.1 å•å…ƒæµ‹è¯•è¦†ç›– (100%)

#### useUserCredits Hook
- âœ… æˆåŠŸè·å–ç”¨æˆ·ç§¯åˆ†
- âœ… å¤„ç†åŠ è½½çŠ¶æ€
- âœ… å¤„ç†é”™è¯¯çŠ¶æ€
- âœ… è‡ªåŠ¨åˆ·æ–°æœºåˆ¶
- âœ… æ¸…ç†å®šæ—¶å™¨

#### CreditsDisplayç»„ä»¶
- âœ… æ˜¾ç¤ºåŠ è½½çŠ¶æ€
- âœ… æ˜¾ç¤ºé”™è¯¯çŠ¶æ€
- âœ… æ˜¾ç¤ºç§¯åˆ†æ•°æ®
- âœ… æ­£ç¡®çš„æ•°æ®æµ

#### CreditsIconç»„ä»¶
- âœ… æ­£ç¡®æ¸²æŸ“å›¾æ ‡
- âœ… æ­£ç¡®çš„æ ·å¼ç±»

#### CreditsValueç»„ä»¶
- âœ… æ­£ç¡®æ ¼å¼åŒ–æ•°å€¼
- âœ… å¤„ç†å¤§æ•°å­—ï¼ˆ1000+ï¼‰

### 5.2 é›†æˆæµ‹è¯•

- âœ… Headerä¸­æ­£ç¡®é›†æˆ
- âœ… æ•°æ®æµæ­£ç¡®ä¼ é€’
- âœ… ä¸å½±å“å…¶ä»–Headerç»„ä»¶

### 5.3 æ€§èƒ½æµ‹è¯•

- âœ… åˆå§‹åŒ–æ—¶é—´ < 100ms
- âœ… APIå“åº”æ—¶é—´ < 1s
- âœ… å†…å­˜æ³„æ¼æ£€æŸ¥

---

## 6. é£é™©è¯„ä¼°

### ä½é£é™©æ“ä½œ

| é£é™© | ç¼“è§£æ–¹æ¡ˆ |
|------|--------|
| APIè¶…æ—¶ | æ˜¾ç¤º"-"ï¼Œè‡ªåŠ¨é‡è¯• |
| å¹¶å‘è¯·æ±‚ | è¯·æ±‚å»é‡ï¼Œé˜²æ­¢é‡å¤è°ƒç”¨ |
| åˆ·æ–°é¢‘ç‡é«˜ | 30ç§’åˆ·æ–°é—´éš”ï¼Œå¯é…ç½® |
| æ ·å¼å†²çª | CSSéš”ç¦»ï¼Œä½¿ç”¨BEMå‘½å |

---

## 7. å‘åå…¼å®¹æ€§

âœ… **å®Œå…¨å…¼å®¹**
- æ–°å¢ç»„ä»¶ï¼Œä¸ä¿®æ”¹ç°æœ‰ç»„ä»¶
- æ–°å¢APIç«¯ç‚¹
- æ— breaking changes

---

## 8. éƒ¨ç½²è®¡åˆ’

1. **å¼€å‘**: 2-4å°æ—¶
2. **æµ‹è¯•**: 1-2å°æ—¶
3. **ä»£ç å®¡æŸ¥**: 1å°æ—¶
4. **éƒ¨ç½²**: ç«‹å³

---

## 9. æˆåŠŸæ ‡å‡†

- âœ… åŠŸèƒ½å®Œæ•´å®ç°
- âœ… 100%æµ‹è¯•è¦†ç›–
- âœ… é›¶lintingé”™è¯¯
- âœ… ä¸å½±å“ç°æœ‰åŠŸèƒ½
- âœ… æ€§èƒ½æŒ‡æ ‡è¾¾æ ‡
- âœ… ç”¨æˆ·åé¦ˆæ­£é¢

---

**å®¡æ‰¹çŠ¶æ€**: â³ å¾…æ‰¹å‡†
**ä¸‹ä¸€æ­¥**: å®ç°å’Œæµ‹è¯•
